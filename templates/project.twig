{% extends "common.twig" %}

{% block name %}{{ name }}{% endblock %}

{% block style %}
    <link rel="stylesheet/less" type="text/css" href="res/res/project.less"/>
{% endblock %}

{% block js %}
    <script type="module" src="res/res/project.js"></script>
{% endblock %}

{% block actions %}
    <button type="button" class="cm-save h-full flex px-2 py-2 cursor-pointer _hover:bg-gray-500 duration-75" title="{{ local.project.save }}" disabled1="disabled1">
        <i class="my-auto fas fa-save"></i>
    </button>
    <button type="button" class="cm-expand h-full flex px-2 py-2 cursor-pointer _hover:bg-gray-500 duration-75" title="{{ local.project.save }}" disabled1="disabled1">
        <i class="my-auto fas fa-expand"></i>
    </button>
{% endblock %}

{% block main %}
    {% import _self as _s %}

    <div id="cm-project" class="bg-white container mx-auto flex h-full">
        <div id="cm-direct" class="w-11 flex flex-col bg-gray-600 text-white">
            <i class="cm-tree fas fa-sitemap p-3 hover:bg-gray-400 duration-75" title="{{ local.project.tree }}"></i>
            <i class="fas fa-user-friends p-3 hover:bg-gray-400 duration-75"></i>
        </div>
        <div id="cm-tree" class="bg-gray-700 text-white py-2 px-3">
            {{ _s.tree(tree) }}
        </div>
        <div>qwqw3/</div>
        <div>qwqw4</div>
    </div>
{% endblock %}

{% macro tree(nodes,isNotTop) %}
    {% import _self as _s %}

    <ul class="{% if not isNotTop %}cm-root{% endif %}">
    {% for node in nodes %}
        <li class="cm-noselect"{% if node.status is defined %} data-status="{{ node.status }}{% endif %}">

            {% if node.status is defined %}
                <i class="cm-action cm-closed fas fa-folder"></i>
                <i class="cm-action cm-opend fas fa-folder-open"></i>
            {% else %}
                <i class="far fa-file"></i>
            {% endif %}

            <span class="_text-xs px-1">{{ node.name }}</span>

            {% if node.children|length %}
                {{ _s.tree(node.children,1) }}
            {% endif %}
        </li>
    {% endfor %}
    </ul>
{% endmacro %}
